# Usamos la imagen de Playwright como imagen base
FROM mcr.microsoft.com/playwright:v1.37.0-jammy

# Establecemos el directorio de trabajo en el contenedor
WORKDIR /usr/src/app

# Copiamos el package.json y package-lock.json primero para aprovechar el caching de Docker
COPY package.json /usr/src/app/package.json

# Listamos los archivos en el directorio de trabajo para debug
RUN ls -al /usr/src/app/

# Instalamos las dependencias del proyecto
# Puedes a침adir --verbose para m치s detalles en el log
RUN npm install --verbose

# Copiamos el resto del c칩digo del proyecto al contenedor
COPY . .

# Listamos los archivos otra vez para asegurarnos que todo se copi칩 correctamente
RUN ls -al /usr/src/app/

# Corremos las pruebas
CMD ["npm", "test"]